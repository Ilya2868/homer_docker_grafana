{"apiVersion":1,"groups":[{"orgId":1,"name":"sip alerts","folder":"sip alerts","interval":"5m","rules":[{"uid":"beh6le2n86k8we","title":"sip 403 Forbidden","condition":"C","data":[{"refId":"A","relativeTimeRange":{"from":600,"to":0},"datasourceUid":"PBFA97CFB590B2093","model":{"editorMode":"code","expr":"increase(heplify_method_response{method=~\"INVITE\",response=~\"403\"}[5m])","instant":true,"intervalMs":1000,"legendFormat":"__auto","maxDataPoints":43200,"range":false,"refId":"A"}},{"refId":"C","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[40],"type":"gt"},"operator":{"type":"and"},"query":{"params":["C"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"A","intervalMs":1000,"maxDataPoints":43200,"refId":"C","type":"threshold"}}],"noDataState":"NoData","execErrState":"Error","for":"5m","annotations":{"summary":"403 Forbidden  - {{ $values.A.Value }}"},"labels":{"sip":"sip"},"isPaused":false,"notification_settings":{"receiver":"Telegram"}},{"uid":"aehhkknfjqs5ce","title":"sip 404 Not found ","condition":"C","data":[{"refId":"A","relativeTimeRange":{"from":600,"to":0},"datasourceUid":"PBFA97CFB590B2093","model":{"editorMode":"code","expr":"increase(heplify_method_response{method=~\"INVITE\",response=~\"404\"}[5m])","instant":true,"intervalMs":1000,"legendFormat":"__auto","maxDataPoints":43200,"range":false,"refId":"A"}},{"refId":"C","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[40],"type":"gt"},"operator":{"type":"and"},"query":{"params":["C"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"A","intervalMs":1000,"maxDataPoints":43200,"refId":"C","type":"threshold"}}],"noDataState":"NoData","execErrState":"Error","for":"5m","annotations":{"summary":"404  Not found  - {{ $values.A.Value }}"},"labels":{"sip":"sip"},"isPaused":false,"notification_settings":{"receiver":"Telegram"}},{"uid":"dehhkog70lvr4c","title":"sip 500 Internal Server Error ","condition":"C","data":[{"refId":"A","relativeTimeRange":{"from":600,"to":0},"datasourceUid":"PBFA97CFB590B2093","model":{"editorMode":"code","expr":"increase(heplify_method_response{method=~\"INVITE\",response=~\"500\"}[5m])","instant":true,"intervalMs":1000,"legendFormat":"__auto","maxDataPoints":43200,"range":false,"refId":"A"}},{"refId":"C","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[40],"type":"gt"},"operator":{"type":"and"},"query":{"params":["C"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"A","intervalMs":1000,"maxDataPoints":43200,"refId":"C","type":"threshold"}}],"noDataState":"NoData","execErrState":"Error","for":"5m","annotations":{"summary":"500 Internal Server Error   - {{ $values.A.Value }}"},"labels":{"sip":"sip"},"isPaused":false,"notification_settings":{"receiver":"Telegram"}},{"uid":"behhkpu5thjwgf","title":"sip 503 Service Unavailable","condition":"C","data":[{"refId":"A","relativeTimeRange":{"from":600,"to":0},"datasourceUid":"PBFA97CFB590B2093","model":{"editorMode":"code","expr":"increase(heplify_method_response{method=~\"INVITE\",response=~\"503\"}[5m])","instant":true,"intervalMs":1000,"legendFormat":"__auto","maxDataPoints":43200,"range":false,"refId":"A"}},{"refId":"C","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[40],"type":"gt"},"operator":{"type":"and"},"query":{"params":["C"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"A","intervalMs":1000,"maxDataPoints":43200,"refId":"C","type":"threshold"}}],"noDataState":"NoData","execErrState":"Error","for":"5m","annotations":{"summary":"503 Service Unavailable - {{ $values.A.Value }}"},"labels":{"sip":"sip"},"isPaused":false,"notification_settings":{"receiver":"Telegram"}},{"uid":"aehhkrxvwo934b","title":"sip 603 Decline","condition":"C","data":[{"refId":"A","relativeTimeRange":{"from":600,"to":0},"datasourceUid":"PBFA97CFB590B2093","model":{"editorMode":"code","expr":"increase(heplify_method_response{method=~\"INVITE\",response=~\"603\"}[5m])","instant":true,"intervalMs":1000,"legendFormat":"__auto","maxDataPoints":43200,"range":false,"refId":"A"}},{"refId":"C","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[40],"type":"gt"},"operator":{"type":"and"},"query":{"params":["C"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"A","intervalMs":1000,"maxDataPoints":43200,"refId":"C","type":"threshold"}}],"noDataState":"NoData","execErrState":"Error","for":"5m","annotations":{"summary":"603 Decline - {{ $values.A.Value }}"},"labels":{"sip":"sip"},"isPaused":false,"notification_settings":{"receiver":"Telegram"}},{"uid":"behsgcsupy8e8b","title":"Registrations","condition":"C","data":[{"refId":"A","queryType":"range","relativeTimeRange":{"from":600,"to":0},"datasourceUid":"P8E80F9AEF21F6940","model":{"datasource":{"type":"loki","uid":"P8E80F9AEF21F6940"},"editorMode":"code","expr":"count_over_time({filename=\"/var/log/asterisk/full\"} |= `No response received` [10m])","instant":true,"intervalMs":1000,"maxDataPoints":43200,"queryType":"range","refId":"A"}},{"refId":"B","queryType":"expression","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[0,0],"type":"gt"},"operator":{"type":"and"},"query":{"params":[]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"name":"Expression","type":"__expr__","uid":"__expr__"},"expression":"A","intervalMs":1000,"maxDataPoints":43200,"reducer":"last","refId":"B","type":"reduce"}},{"refId":"C","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[0],"type":"gt"},"operator":{"type":"and"},"query":{"params":["C"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"B","intervalMs":1000,"maxDataPoints":43200,"refId":"C","type":"threshold"}}],"noDataState":"OK","execErrState":"Error","for":"10m","annotations":{"summary":"Возможно ошибка регистрации транка: No response received - {{ $values.A.Value }}"},"isPaused":false,"notification_settings":{"receiver":"Telegram"}},{"uid":"cei6wn57hj8qoe","title":"rtcp","condition":"C","data":[{"refId":"A","queryType":"instant","relativeTimeRange":{"from":600,"to":0},"datasourceUid":"P8E80F9AEF21F6940","model":{"datasource":{"type":"loki","uid":"P8E80F9AEF21F6940"},"editorMode":"code","expr":"count_over_time({filename=\"/var/log/asterisk/full\"} |= `rtcp` [10m])","instant":true,"intervalMs":1000,"maxDataPoints":43200,"queryType":"instant","refId":"A"}},{"refId":"C","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[5],"type":"gt"},"operator":{"type":"and"},"query":{"params":["C"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"A","intervalMs":1000,"maxDataPoints":43200,"refId":"C","type":"threshold"}}],"noDataState":"OK","execErrState":"Error","for":"10m","annotations":{"summary":"RTCP - {{ $values.A.Value }}"},"isPaused":false,"notification_settings":{"receiver":"Telegram"}},{"uid":"deih4yv4j8etcb","title":"Rejecting","condition":"C","data":[{"refId":"A","queryType":"instant","relativeTimeRange":{"from":600,"to":0},"datasourceUid":"P8E80F9AEF21F6940","model":{"datasource":{"type":"loki","uid":"P8E80F9AEF21F6940"},"editorMode":"code","expr":"count_over_time({filename=\"/var/log/asterisk/full\"} |= `Rejecting` [10m])","instant":true,"intervalMs":1000,"maxDataPoints":43200,"queryType":"instant","refId":"A"}},{"refId":"C","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[30],"type":"gt"},"operator":{"type":"and"},"query":{"params":["C"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"A","intervalMs":1000,"maxDataPoints":43200,"refId":"C","type":"threshold"}}],"noDataState":"OK","execErrState":"Error","for":"10m","annotations":{"summary":"Отклонен запрос на регистрацию - {{ $values.A.Value }}"},"isPaused":false,"notification_settings":{"receiver":"Telegram"}},{"uid":"beiv38jhgccu8a","title":"Stasis","condition":"C","data":[{"refId":"A","queryType":"instant","relativeTimeRange":{"from":600,"to":0},"datasourceUid":"P8E80F9AEF21F6940","model":{"datasource":{"type":"loki","uid":"P8E80F9AEF21F6940"},"editorMode":"code","expr":"count_over_time({filename=\"/var/log/asterisk/full\"} |= `task processor queue reached` [10m])","instant":true,"intervalMs":1000,"maxDataPoints":43200,"queryType":"instant","refId":"A"}},{"refId":"C","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[2],"type":"gt"},"operator":{"type":"and"},"query":{"params":["C"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"A","intervalMs":1000,"maxDataPoints":43200,"refId":"C","type":"threshold"}}],"noDataState":"OK","execErrState":"Error","for":"10m","annotations":{"summary":"Stasis  - {{ $values.A.Value }}"},"isPaused":false,"notification_settings":{"receiver":"Telegram"}}]}]}